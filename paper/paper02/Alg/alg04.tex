%
% line numbering
%
\renewcommand{\LinesNumbered}{%
	\setboolean{algocf@linesnumbered}{true}%
	\renewcommand{\algocf@linesnumbered}{\everypar={\nl}}}%

\let\oldnl\nl% Store \nl in \oldnl
\newcommand{\nonl}{\renewcommand{\nl}{\let\nl\oldnl}}% Remove line number for one line

\ifdefined\varInputAlgos%
\renewcommand{\arraystretch}{1.90}%
%\todo{Do we mean non-recycling or not circulating?}%
\begin{algorithm*}[!h]%
	\DontPrintSemicolon
	\caption{$GetMCirc$: Measure $\protect\MCirc$ for given transaction $t$, $\typett$ \acs*{wbaType} within window $\wndw$.%
	}\label{algo:code_mcirc}%
	%
	%
	$\MCirc \gets {0}$                                                                        \tcc*{Money supply to be estimated for given arguments}%
	\lIf(                                                                                     \tcc*[f]{Return transactions without any inputs to be added}){$\isCoinbase(t)\ \orbf\ \sum_{i\in\Inp_{t}} \val(i)\,=\,0$}{return $0$}%

	\ForEach {$i \in \Inp_{t}$\label{algo:code_mcirc_for}%
	}{%
		\If(                                                                                  \tcc*[f]{Input $i$ was generated before $\wndw^{\mathtt{lookback}=\wndwLength}_{\Start}$ regardless of the transaction type}){%
		$\dateGen(i) < \wndw^{\mathtt{lookback}=\wndwLength}_{\Start} $
		}{%        
			$ \MCirc \gets{\MCirc\,+\,\val(i)} $                                             \tcc*{Add the full value of $i$}%
		}% 
		\tcc*{Special handling of inputs generated by coinbase txes within window}
		\If(                                                                                  ){%
			$\dateGen(i) \ge \wndw^{\mathtt{lookback}=\wndwLength}_{\Start}~\andbf~\genByCoinbase(i)$
		}{%
			\If(                                                                                 \tcc*[f]{Input $i$ references a coinbase output representing mined coins}){%
				$\reprMinedCoins(i)$
			}{%
				$\MCirc \gets{\MCirc\,+\,\valMinedCoinsPart(i)}$                                            \tcc*{Add part of value of $i$ that represents mined coins}%
			}%
		}%
          
	}%
	return $\MCirc$                                                                           \tcc*{Result: Return measured money in circulation with lookback window \(\wndw^{\mathtt{lookback}=\wndwLength}\)}%
\end{algorithm*}%
\else%
\fi%
